<h1>{{title}}</h1>
<hr>
<div class="list-group border border-primary">
   <label
      *ngFor="let item of lstEntities;"
      class="list-group-item"
      >
   <input
      class="form-check-input me-1"
      type="checkbox"
      (change)="onSelectItem(item)"
      ng-checked="item"
      >
   {{ item.name }}
   </label>
</div>
<br>
<div class="col-12">
   <table class="table">
      <thead>
         <tr>
            <th scope="col">Logo</th>
            <th scope="col">ID</th>
            <th scope="col">
               Nombre
               <button (click)="onSortName()">
                  <svg *ngIf="!sortName" class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                     <path fill="currentColor" d="M12 5H22V7H12M12 19V17H22V19M12 11H22V13H12M9 13V15L5.67 19H9V21H3V19L6.33 15H3V13M7 3H5C3.9 3 3 3.9 3 5V11H5V9H7V11H9V5C9 3.9 8.11 3 7 3M7 7H5V5H7Z" />
                  </svg>
                  <svg *ngIf="sortName" class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                     <path fill="currentColor" d="M7 13H5C3.9 13 3 13.9 3 15V21H5V19H7V21H9V15C9 13.9 8.11 13 7 13M7 17H5V15H7M9 3V5L5.67 9H9V11H3V9L6.33 5H3V3M12 5H22V7H12M12 19V17H22V19M12 11H22V13H12Z" />
                  </svg>
               </button>
            </th>
            <th scope="col">N° de identificación</th>
            <th scope="col">
               Fecha de expiración 
               <button (click)="onSortDate()">
                  <svg *ngIf="!sortName" class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                     <path fill="currentColor" d="M12 5H22V7H12M12 19V17H22V19M12 11H22V13H12M9 13V15L5.67 19H9V21H3V19L6.33 15H3V13M7 3H5C3.9 3 3 3.9 3 5V11H5V9H7V11H9V5C9 3.9 8.11 3 7 3M7 7H5V5H7Z" />
                  </svg>
                  <svg *ngIf="sortName" class="material-icons" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                     <path fill="currentColor" d="M7 13H5C3.9 13 3 13.9 3 15V21H5V19H7V21H9V15C9 13.9 8.11 13 7 13M7 17H5V15H7M9 3V5L5.67 9H9V11H3V9L6.33 5H3V3M12 5H22V7H12M12 19V17H22V19M12 11H22V13H12Z" />
                  </svg>
               </button>
            </th>
            <th scope="col">Nombre de contacto</th>
            <th scope="col">Correo de contacto</th>
            <th scope="col">Dirección IP</th>
            <th scope="col">Opciones</th>
         </tr>
      </thead>
      <tbody>
         <tr
            *ngFor="let item of lstEntitiesSelected"
            >
            <td class="text-center"><img  width="100" height="100" class="img-thumbnail" [src]="item.logo !== '' ? item.logo : '/assets/logo_default.png'" alt="logo"></td>
            <td class="align-center">{{ item.entityId }}</td>
            <td class="align-center">{{ item.name }}</td>
            <td class="align-center">{{ item.identificationNumber }}</td>
            <td class="align-center">{{ item.expirationDate }}</td>
            <td class="align-center">{{ item.contactName }}</td>
            <td class="align-center">{{ item.contactMail }}</td>
            <td class="align-center">{{ item.ipAddress }}</td>
            <td class="align-center">
               <button type="button" class="btn btn-info" (click)="open(editModal, item.entityId, true)">Editar <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                <path fill="currentColor" d="M21.04 12.13C21.18 12.13 21.31 12.19 21.42 12.3L22.7 13.58C22.92 13.79 22.92 14.14 22.7 14.35L21.7 15.35L19.65 13.3L20.65 12.3C20.76 12.19 20.9 12.13 21.04 12.13M19.07 13.88L21.12 15.93L15.06 22H13V19.94L19.07 13.88M19 3C20.1 3 21 3.9 21 5V9L11 19V21H5C3.9 21 3 20.1 3 19V5C3 3.9 3.9 3 5 3H9.18C9.6 1.84 10.7 1 12 1C13.3 1 14.4 1.84 14.82 3H19M12 3C11.45 3 11 3.45 11 4C11 4.55 11.45 5 12 5C12.55 5 13 4.55 13 4C13 3.45 12.55 3 12 3Z" />
            </svg></button>&nbsp;
               <button type="button" class="btn btn-danger" (click)="open(deleteModal, item.entityId, false)">Eliminar <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                <path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" />
            </svg></button>
            </td>
         </tr>
      </tbody>
   </table>
</div>
<ng-template #editModal let-modal>
   <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Editar registro</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('')">
      <span aria-hidden="true">×</span>
      </button>
   </div>
   <div class="modal-body">
      <div class="row mt-12 p-12">
         <div class="col-12">
            <div class="form" [formGroup]="form">
               <div class="mb-12">
                  <label for="name" class="form-label fw-bold">Nombre</label>
                  <input type="text" class="form-control" id="name" formControlName="name">
                  <div *ngIf="form.get('name')?.getError('required')" class="invalid-feedback">
                     Campo requerido.
                  </div>
               </div>
               <div class="mb-12">
                  <label for="identificationNumber" class="form-label fw-bold">N° de identificación</label>
                  <input type="text" class="form-control" id="identificationNumber" formControlName="identificationNumber">
                  <div *ngIf="form.get('identificationNumber')?.getError('required')" class="invalid-feedback">
                     Campo requerido.
                  </div>
               </div>
               <div class="mb-12">
                  <label for="expirationDate" class="form-label fw-bold">Fecha expiración</label>
                  <input type="text" class="form-control" id="expirationDate" formControlName="expirationDate">
                  <div *ngIf="form.get('expirationDate')?.getError('required')" class="invalid-feedback">
                     Campo requerido.
                  </div>
                  <div *ngIf="form.get('expirationDate')?.getError('pattern')" class="invalid-feedback">
                     Formato incorrecto.
                  </div>
               </div>
               <div class="mb-12">
                  <label for="contactName" class="form-label fw-bold">Nombre de contacto</label>
                  <input type="text" class="form-control" id="contactName" formControlName="contactName">
                  <div *ngIf="form.get('contactName')?.getError('required')" class="invalid-feedback">
                     Campo requerido.
                  </div>
               </div>
               <div class="mb-12">
                  <label for="contactMail" class="form-label fw-bold">Correo de contacto</label>
                  <input type="text" class="form-control" id="contactMail" formControlName="contactMail">
                  <div *ngIf="form.get('contactMail')?.getError('required')" class="invalid-feedback">
                     Campo requerido.
                  </div>
                  <div *ngIf="form.get('contactMail')?.getError('email')" class="invalid-feedback">
                     Formato de correo inválido.
                  </div>
               </div>
               <div class="mb-12">
                  <label for="ipAddress" class="form-label fw-bold">Dirección IP</label>
                  <input type="text" class="form-control" id="ipAddress" formControlName="ipAddress">
               </div>
               <br>
            </div>
         </div>
         <div class="col-3"></div>
      </div>
   </div>
   <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" [disabled]="form.invalid" (click)="modal.close('edit')">Guardar</button>
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('')">Cancelar</button>
   </div>
</ng-template>
<ng-template #deleteModal let-modal>
   <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Eliminar registro</h4>
      <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('')">
      <span aria-hidden="true">×</span>
      </button>
   </div>
   <div class="modal-body">
      ¿ Está seguro que desea eliminar este registro ?
   </div>
   <div class="modal-footer">
      <button type="button" class="btn btn-outline-danger" (click)="modal.close('delete')">Eliminar</button>
      <button type="button" class="btn btn-outline-dark" (click)="modal.close('')">Cancelar</button>
   </div>
</ng-template>